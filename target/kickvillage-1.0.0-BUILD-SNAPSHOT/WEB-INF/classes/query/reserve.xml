<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="Reserve">
 
	<insert id="add" parameterType="Reserve">
		INSERT INTO kickvillage.reserve (userId, serialNum,rentalStationNum, reserveDate, rentalFee,availability) 
		VALUES (  #{userId}, #{serialNum} , #{rentalStationNum}, #{reserveDate}, #{rentalFee}, #{availability})
	</insert>
	
	<select id="check" parameterType="Reserve" resultType="Int">
		SELECT COUNT(*) 
		FROM kickvillage.reserve 
		WHERE serialNum=#{serialNum} AND availability = "y" 
	</select>
	
	<select id="myList" parameterType="String" resultType="Reserve">
		SELECT * FROM kickvillage.reserve 
		WHERE userId=#{userId}
	</select>
	
	<select id="allList" parameterType="Int" resultType="Reserve">
		SELECT * FROM kickvillage.reserve 
		WHERE serialNum=#{serialnum} AND availability = "y"
	</select>
	
	<update id="cancel" parameterType="Reserve" >
		UPDATE kickvillage.reserve 
		SET availability = "n"
		WHERE reserveNum=#{reserveNum} AND userId=#{userId} AND reserveDate IS NOT null
	</update>
	
	<select id="myReserveCk" parameterType="Reserve" resultType="Int">
		SELECT COUNT(*) 
		FROM kickvillage.reserve 
		WHERE userId=#{userId} AND serialNum=#{serialNum} AND availability = "y" 
	</select>
	
	<insert id="rental" parameterType="Reserve" >
		INSERT INTO kickvillage.reserve (userId, serialNum,rentalStationNum, rentalDate, rentalFee, availability) 
		VALUES (  #{userId}, #{serialNum} , #{rentalStationNum}, #{rentalDate}, #{rentalFee}, "y")
	</insert>
	
	<update id="upRental" parameterType="Reserve" >
		UPDATE kickvillage.reserve 
		SET rentalDate=#{rentalDate}
		WHERE serialNum=#{serialNum} AND userId=#{userId}
	</update>
 </mapper> 