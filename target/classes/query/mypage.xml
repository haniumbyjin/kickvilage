<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="Mypage">
 
	<insert id="joinuser" parameterType="User">
		INSERT INTO user (userId, userPw, userName, phoneNum, salt ) 
		VALUES ( #{userId},#{userPw} , #{userName}, #{phoneNum}, #{salt})
	</insert>
	
	<select id="checkid" parameterType="String" resultType="Int">
		SELECT 	COUNT(userId) 
		FROM 	user 
		WHERE 	userId=#{userId}
	</select>
	
	<select id="beforeEntry" parameterType="User" resultType="Int">
		SELECT COUNT(*) FROM user WHERE userId=#{userId} and  userPw = #{userPw} 
	</select>
	
	<select id="getSalt" parameterType="String" resultType="String">
		SELECT salt FROM user WHERE userId = #{userid}
	</select>
	
	<select id="getUserInfo" parameterType="hashMap" resultType="User">
		SELECT userId, userPw, userName, phoneNum, driverLisence FROM user WHERE userId=#{userId} AND  userPw=#{userPw} 
	</select>
	
	<select id="login" parameterType="hashMap" resultType="Int">
		SELECT COUNT(userid) FROM user WHERE userId=#{userId} and userPw= #{userPw} 
	</select>
	
	<update id="findPw" parameterType="Email">
		UPDATE
		kickvillage.user
		SET 
		userPw=#{userPw}, salt=#{salt}
		WHERE 
		userId = #{userId} 
	</update>

	<select id="seleteUserId" parameterType="Email" resultType="String">
		SELECT userid FROM user WHERE userName=#{userName} and phoneNum= #{phoneNum} 
	</select>

	<update id="update" parameterType="User">
		UPDATE
		kickvillage.user
		SET 
		userName=#{userName}, userPw=#{userPw}, salt=#{salt}, phoneNum=#{phoneNum}, driverLisence=#{driverLisence}
		WHERE 
		userId = #{userId} 
	</update>
 </mapper> 